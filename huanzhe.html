<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>æ…§å¿ƒåº·å¤è®­ç»ƒä¸­å¿ƒ - æ‚£è€…é—¨æˆ·</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="huanzhe.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- ç›´æ¥æ˜¾ç¤ºæ¸¸æˆé€‰æ‹©ç•Œé¢ -->
    <div id="gameScreen" class="game-screen">
      <header class="game-header">
        <div class="header-content">
          <div class="user-info">
            <div class="user-avatar">
              <span id="userInitial">æ</span>
            </div>
            <div class="user-details">
              <h2 id="userName">æé˜¿å§¨</h2>
              <p id="userStatus">åº·å¤è®­ç»ƒä¸­</p>
            </div>
          </div>
          
          <div class="header-actions">
            <button onclick="showProfile()" class="profile-btn">ä¸ªäººä¿¡æ¯</button>
          </div>
        </div>
      </header>

      <main class="game-selection">
        <div class="selection-header">
          <h1>åº·å¤è®­ç»ƒé¡¹ç›®</h1>
          <p>è¯·é€‰æ‹©é€‚åˆæ‚¨çš„è®­ç»ƒé¡¹ç›®ï¼Œå¼€å§‹åº·å¤ä¹‹æ—…</p>
        </div>

        <div class="game-grid">
          <a href="#" onclick="startGame('brick')" class="game-card coordination-card">
            <div class="card-icon">ğŸ¯</div>
            <div class="card-content">
              <h3>æ‰‹çœ¼åè°ƒè®­ç»ƒ</h3>
              <p>é€šè¿‡åŠ¨æ€è¿½è¸ªæ¸¸æˆï¼Œæå‡ååº”é€Ÿåº¦ä¸æ‰‹çœ¼åè°ƒèƒ½åŠ›</p>
            </div>
            <div class="card-arrow">â†’</div>
          </a>

          <a href="#" onclick="startGame('fruit')" class="game-card reaction-card">
            <div class="card-icon">ğŸ</div>
            <div class="card-content">
              <h3>ååº”é€Ÿåº¦è®­ç»ƒ</h3>
              <p>é€šè¿‡æ‰‹åŠ¿åˆ‡å‰²æ°´æœï¼Œæå‡ååº”é€Ÿåº¦å’ŒåŠ¨ä½œæ•æ·æ€§</p>
            </div>
            <div class="card-arrow">â†’</div>
          </a>

          <a href="#" onclick="startGame('cognitive')" class="game-card cognitive-card">
            <div class="card-icon">ğŸ§ </div>
            <div class="card-content">
              <h3>è®¤çŸ¥èƒ½åŠ›è®­ç»ƒ</h3>
              <p>é€šè¿‡è®°å¿†å’Œé€»è¾‘æ¸¸æˆï¼Œæå‡è®¤çŸ¥åŠŸèƒ½å’Œè®°å¿†èƒ½åŠ›</p>
            </div>
            <div class="card-arrow">â†’</div>
          </a>
        </div>
      </main>
    </div>

    <!-- ä¸ªäººä¿¡æ¯æ¨¡æ€æ¡† -->
    <div id="profileModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ä¸ªäººä¿¡æ¯</h3>
          <button onclick="closeProfile()" class="close-btn">&times;</button>
        </div>
        <div class="modal-body">
          <div class="profile-info">
            <div class="info-item">
              <label>å§“å</label>
              <span id="profileName">æé˜¿å§¨</span>
            </div>
            <div class="info-item">
              <label>å¹´é¾„</label>
              <span id="profileAge">65å²</span>
            </div>
            <div class="info-item">
              <label>æ€§åˆ«</label>
              <span id="profileGender">å¥³</span>
            </div>
            <div class="info-item">
              <label>è”ç³»ç”µè¯</label>
              <span id="profilePhone">138****8888</span>
            </div>
            <div class="info-item">
              <label>æ³¨å†Œæ—¥æœŸ</label>
              <span id="profileDate">2024-01-15</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // æ˜¾ç¤ºä¸ªäººä¿¡æ¯
      function showProfile() {
        document.getElementById('profileModal').classList.remove('hidden');
      }

      // å…³é—­ä¸ªäººä¿¡æ¯
      function closeProfile() {
        document.getElementById('profileModal').classList.add('hidden');
      }

      // å¯åŠ¨æ¸¸æˆ
      function startGame(gameType) {
        // è·å–å½“å‰æœåŠ¡å™¨åœ°å€
        const currentUrl = window.location.origin;
        
        // æ„é€ æ¸¸æˆURL
        let gameUrl;
        switch(gameType) {
          case 'brick':
            gameUrl = `${currentUrl}/game/brick`;
            break;
          case 'fruit':
            gameUrl = `${currentUrl}/game/fruit`;
            break;
          case 'cognitive':
            gameUrl = `${currentUrl}/game/cognitive`;
            break;
          default:
            console.error('æœªçŸ¥çš„æ¸¸æˆç±»å‹:', gameType);
            return;
        }
        
        // æ·»åŠ æœåŠ¡å™¨å‚æ•°
        gameUrl += `?server=${encodeURIComponent(currentUrl)}`;
        
        // è·³è½¬åˆ°æ¸¸æˆé¡µé¢
        window.location.href = gameUrl;
      }

      // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
      document.addEventListener('DOMContentLoaded', function() {
        console.log('æ‚£è€…é—¨æˆ·å·²åŠ è½½');
        
        // æ£€æŸ¥æ˜¯å¦é€šè¿‡ç½‘ç»œè®¿é—®
        if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
          console.log('é€šè¿‡ç½‘ç»œè®¿é—®ï¼ŒæœåŠ¡å™¨åœ°å€:', window.location.origin);
        }
      });
    </script>
  </body>
</html>
