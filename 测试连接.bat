@echo off
chcp 65001 >nul
title 连接测试工具

echo.
echo ================================================
echo          🔍 HTTPS连接测试工具
echo ================================================
echo.

echo 正在测试连接到 https://192.168.3.119:3443...
echo.

:: 检查端口是否开放
echo [1] 检查端口3443是否开放:
netstat -an | findstr ":3443"
echo.

:: 检查本机IP
echo [2] 本机IP地址:
ipconfig | findstr "IPv4"
echo.

:: 测试网络连通性
echo [3] 测试网络ping:
ping -n 2 192.168.3.119
echo.

echo ================================================
echo              🔧 浏览器访问步骤
echo ================================================
echo.
echo 1. 打开浏览器，访问: https://192.168.3.119:3443
echo 2. 如果出现"不安全连接"警告，点击"高级"
echo 3. 选择"继续前往 192.168.3.119 (不安全)"
echo 4. 医护端界面应该正常显示
echo.
echo 患者端访问: https://192.168.3.119:3443/patient
echo.

echo ================================================
echo              ⚠️  常见问题解决
echo ================================================
echo.
echo 如果仍然无法连接：
echo 1. 确保Windows防火墙允许3443端口
echo 2. 重启服务器: 双击"启动HTTPS服务器.bat"
echo 3. 尝试使用HTTP模式: http://192.168.3.119:3000
echo 4. 检查是否有杀毒软件阻止连接
echo.

pause